== Step 5: Test PHP and MariaDB

****
At the end of this step, you will have logged in to your cloud server and verified that PHP, MariaDB and phpMyAdmin are working correctly.
****

You can now connect to the cloud server and test PHP to make sure it's working correctly and has all the extensions you need. The easiest way to do this is with https://www.chiark.greenend.org.uk/~sgtatham/putty/[PuTTY], a free SSH client for Windows and UNIX platforms.

 * Download the PuTTY ZIP archive from https://www.chiark.greenend.org.uk/~sgtatham/putty/[its website]. 
 * Extract the contents to a folder on your desktop. 
 * Double-click the _putty.exe_ file to bring up the PuTTY configuration window. 
 * Enter the host name of your cloud server into the "Host Name (or IP address)" field, as well as into the "Saved Sessions" field. 
 * Click "Save" to save the new session so you can reuse it later.

image::{cloud}/image51.jpg[]

 * In the "Connection → SSH → Tunnels" section, create a secure tunnel for the phpMyAdmin application by forwarding source port "8888" to destination port "localhost:80". 
 * Click the "Add" button to add the secure tunnel configuration to the session.

image::{cloud}/image52.jpg[]

 * In the "Connection → SSH → Auth" section, select the private key file (_*.ppk_) you saved in the previous step.

image::{cloud}/image53.jpg[]

 * In the "Connection → Data" section, enter the username 'bitnami' into the "Auto-login username" field.

image::{cloud}/image54.jpg[]

 * Go back to the "Session" section and save your changes by clicking the "Save" button. 
 * Click the "Open" button to open an SSH session to the server. 
 * PuTTY will first ask you to confirm the server's host key and add it to the cache. Go ahead and click "Yes" to this request.

image::{cloud}/image55.jpg[]

You should now be logged in to your cloud server.

image::{cloud}/image56.jpg[]

By default, LAMP packaged by Bitnami includes running Apache and MariaDB servers, and all the packages that come with the stack are located in the _/opt/bitnami_ directory. Your first step should be to create a _phpinfo.php_ file in the Apache web server root at _/opt/bitnami/apache2/htdocs_ directory to verify PHP's capabilities.

----
shell> cd /opt/bitnami/apache2/htdocs
shell> echo "<?php phpinfo(); ?>" > phpinfo.php
----

Once the file has been copied, browse to _http://[your-cloud-server-hostname]/phpinfo.php_ and you should see the output of the _phpinfo()_ command.

image::common/phpinfo.jpg[]

With this, you know that your PHP installation is configured and working correctly.

You can also check that MariaDB is working by launching the MariaDB command-line client at the shell prompt.

----
shell> mysql -u root -p
----

When prompted, enter the application password retrieved in the previous step. The client should start up and connect to the local MariaDB server, displaying a welcome message as shown below.

image::common/mariadb-login.jpg[]

You should also be able to access phpMyAdmin through the secure SSH tunnel you created, by browsing to http://127.0.0.1:8888/phpmyadmin. 

image::{cloud}/image59.jpg[]

To log in, use username 'root' with the application password from the previous step.

image::{cloud}/image510.jpg[]

In case you'd like to troubleshoot errors or modify the configuration for Apache, PHP or MariaDB - for example, https://docs.bitnami.com/aws/infrastructure/lamp/administration/increase-upload-limit-php/[adjusting the maximum upload file size in PHP] or https://docs.bitnami.com/aws/infrastructure/lamp/administration/change-data-directory/[changing the path to the MariaDB data directory] - here are the locations for key configuration and log files in LAMP packaged by Bitnami:

|===
||Configuration file(s)|Log file(s)
|Apache|_/opt/bitnami/apache2/conf/httpd.conf_|_/opt/bitnami/apache2/logs/error_log_
|PHP|_/opt/bitnami/php/etc/php.ini_|__-__
|MariaDB|_/opt/bitnami/mariadb/conf/my.cnf_|_/opt/bitnami/mariadb/logs/mysqld.log_
|===

Usually, you'll need to restart your server(s) for your changes to take effect. LAMP packaged by Bitnami includes a control script that lets you easily stop, start and restart Apache, MariaDB and PHP. The script is located at _/opt/bitnami/ctlscript.sh_. Call it without any arguments to restart all services:

----
shell> sudo /opt/bitnami/ctlscript.sh restart
----

Or use it to restart a specific service only by passing the service name as argument - for example 'mariadb':

----
shell> sudo /opt/bitnami/ctlscript.sh restart mariadb
----

image::common/mariadb-restart.jpg[]
